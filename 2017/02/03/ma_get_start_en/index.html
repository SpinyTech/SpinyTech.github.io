<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>The guide of the ModularizationArchitecture | Spiny</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.1.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.2/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.3/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">The guide of the ModularizationArchitecture</h1><a id="logo" href="/.">Spiny</a><p class="description">Stay Hungry, Stay Foolish, Stay Uncomfortable.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">The guide of the ModularizationArchitecture</h1><div class="post-meta">Feb 3, 2017<span> | </span><span class="category"><a href="/categories/Android/">Android</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2017/02/03/ma_get_start_en/" href="/2017/02/03/ma_get_start_en/#comments" class="ds-thread-count"></a><div class="post-content"><p><font color="red" size="4">Githup Repository：<a href="https://github.com/SpinyTech/ModularizationArchitecture" target="_blank" rel="external">ModularizationArchitecture</a><br>My Homepage：<a href="https://github.com/SpinyTech" target="_blank" rel="external">SpinyTech</a><br>Welcome to add star and follow.</font><br><br><br>ModularizationArchitecture is a routing-based multi-process, component-based architecture on the Android platform: it communicates with different modules and processes by sharing routes without referring to other modules. It is suitable for medium-sized App architecture team collaboration, parallel development, business line decoupling, white-box testing and other scenes.</p>
<h2 id="1-Definition"><a href="#1-Definition" class="headerlink" title="1. Definition"></a>1. Definition</h2><ul>
<li><code>Main App Module</code>：The main module of the project, which can be run on the mobile.</li>
<li><code>Library Moudule</code>：The library of the project. It is a business module or a functional component of the project.</li>
<li><code>Test App Module</code>：The main module of the project, which can be run on the mobile. It used to test a library module.</li>
<li><code>Action</code>：The specific implementation of Cross-module calls.</li>
<li><code>ActionResult</code>：The result returned by the Action invoke.</li>
<li><code>Provider</code>：Provider is a actions cluster, It make register actions easier.</li>
<li><code>RouterRequest</code>：The request when invoke an action.</li>
<li><code>RouterResponse</code>：The response when an action invoked completed.</li>
<li><code>LocalRouter</code>：The local router.</li>
<li><code>WideRouter</code>：The multiple process wide router.</li>
<li><code>LocalRouterConnectService</code>：The guard service of local router, used to connect with the wide router, perform AIDL cross-process communication.  </li>
</ul>
<h2 id="2-Getting-start"><a href="#2-Getting-start" class="headerlink" title="2. Getting start"></a>2. Getting start</h2><h3 id="2-1-在项目中集成"><a href="#2-1-在项目中集成" class="headerlink" title="2.1 在项目中集成"></a>2.1 在项目中集成</h3><p>首先我们需要在<strong>主App Moudule</strong>和<strong>所有模块Library Moudule</strong>的build.gradle中都需要添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile &apos;com.spinytech.ma:macore:0.1.2&apos;</span><br></pre></td></tr></table></figure>
<h3 id="2-2-创建自定义Application"><a href="#2-2-创建自定义Application" class="headerlink" title="2.2 创建自定义Application"></a>2.2 创建自定义Application</h3><p>创建自定义的Application继承自<code>MaApplication</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class CustomApplication extends MaApplication &#123;</span><br><span class="line"></span><br><span class="line">    // 注册多个进程的本地路由器，在2.7.1中有详细介绍</span><br><span class="line">    @Override</span><br><span class="line">    public void initializeAllProcessRouter() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 注册Application逻辑，详见2.3</span><br><span class="line">    @Override</span><br><span class="line">    protected void initializeLogic() &#123;</span><br><span class="line">        //第一个参数表示进程名，第二个表示初始化优先级，第三个是对应的Application逻辑类，在需要的时候会反射初始化</span><br><span class="line">        registerApplicationLogic(&quot;com.spinytech.maindemo&quot;,999, MainApplicationLogic.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 标记该App是否是多进程的，如果是多进程则返回true，否则返回false</span><br><span class="line">    @Override</span><br><span class="line">    public boolean needMultipleProcess() &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>AndroidManifest.xml</code>中加入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">      ...</span><br><span class="line">      android:name=&quot;xxx.xxx.CustomApplication&quot;</span><br><span class="line">      ...</span><br><span class="line">      &gt;</span><br><span class="line">      ...</span><br><span class="line">&lt;/application&gt;</span><br></pre></td></tr></table></figure>
<h3 id="2-3-创建自定义ApplicationLogic"><a href="#2-3-创建自定义ApplicationLogic" class="headerlink" title="2.3 创建自定义ApplicationLogic"></a>2.3 创建自定义ApplicationLogic</h3><p>在<code>initializeLogic</code>方法中，需要对<code>Application</code>和实际的<code>ApplicationLogic</code>进行分离，之所以分离，是因为如果引入多进程，<code>Application</code>会初始化多次，如果将逻辑分离，则每次<code>Application</code>初始化，会针对不同的进程，初始化不同的逻辑。  </p>
<p><code>ApplicationLogic</code>的生命周期和<code>Application</code>是相同的，都具有<code>onCreate</code>、<code>onTerminate</code>、<code>onLowMemory</code>等。</p>
<p>创建自定义<code>ApplicationLogic</code>继承自<code>BaseApplicationLogic</code>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class CustomApplicationLogic extends BaseApplicationLogic &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate() &#123;</span><br><span class="line">        // 注册Provider，详见2.4</span><br><span class="line">        LocalRouter.getInstance(mApplication).registerProvider(&quot;util&quot;,new UtilProvider());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onTerminate()&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onLowMemory()&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onTrimMemory(int level)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onConfigurationChanged(Configuration newConfig) &#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-4-实现Provider"><a href="#2-4-实现Provider" class="headerlink" title="2.4 实现Provider"></a>2.4 实现Provider</h3><p><code>Provider</code>的数据结构实际上就是一个HashMap，它的功能就是将多个<code>Action</code>绑到一起，便于本地局域路由器进行注册。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class UtilProvider extends MaProvider &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void registerActions() &#123;</span><br><span class="line">        registerAction(&quot;md5&quot;,new MD5EncryptAction());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Provider</code>创建好了之后，就在本地局域路由器中进行注册，通常是在<code>ApplicationLogic</code>的<code>onCreate</code>方法中进行注册(可以参考2.3)。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalRouter.getInstance(mApplication).registerProvider(&quot;util&quot;,new CustomProvider());</span><br></pre></td></tr></table></figure>
<p>第一个参数”util”是provider key，可以自定义，以后在调用的时候需要用到。</p>
<h3 id="2-5-实现Action"><a href="#2-5-实现Action" class="headerlink" title="2.5 实现Action"></a>2.5 实现Action</h3><p>每一个<code>Action</code>都是一个对外提供调用的具体实现。我们需要对其进行继承，重写。</p>
<p><code>Action</code>中有两个方法需要重写，一个是<code>isAsync()</code>，一个是<code>invoke()</code>。  </p>
<p><code>isAsync()</code>需要告诉调用者，该Action是否是耗时异步的，如果是耗时的（比如网络操作、IO操作等），则返回true，如果非耗时的，则返回false。之所以加上这个判断，是因为有一些调用可能是在主线程进行，我们需要判断这个调用是否是耗时的，从而决定是否要新开工作进程进行调用。</p>
<p><code>invoke()</code>方法就是实际调用的实现方法。该方法的入参有上下文<code>Context</code>和一组请求数据<code>HashMap&lt;String,String&gt;</code>，该方法返回<code>AcationResult</code>作为结果返回给调用者。<br><code>AcationResult</code>的数据结构是这样的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    code:xxx,</span><br><span class="line">    msg:xxx,</span><br><span class="line">    data:xxx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>整个方法执行过程类似于Web应用，入参是一组key-value键值对，进行一系列处理后，返回处理结果。</p>
<p>下面我们举个简单的MD5加密例子，创建自定义<code>MD5EncryptAction</code>继承自<code>MaAction</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class MD5EncryptAction extends MaAction &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isAsync(Context context, HashMap&lt;String, String&gt; requestData) &#123;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public MaActionResult invoke(Context context, HashMap&lt;String, String&gt; requestData) &#123;</span><br><span class="line">        String result = &quot;&quot;;</span><br><span class="line">        if(!TextUtils.isEmpty(requestData.get(&quot;params_1&quot;)))&#123;</span><br><span class="line">            result +=requestData.get(&quot;params_1&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        if(!TextUtils.isEmpty(requestData.get(&quot;params_2&quot;)))&#123;</span><br><span class="line">            result +=requestData.get(&quot;params_2&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        // MD5Util为模块下自定义的工具类，这里就省略了。</span><br><span class="line">        result = MD5Util.md5(temp);</span><br><span class="line">        </span><br><span class="line">        MaActionResult result = new MaActionResult.Builder()</span><br><span class="line">                .code(MaActionResult.CODE_SUCCESS)</span><br><span class="line">                .msg(&quot;success&quot;)</span><br><span class="line">                .data(result)</span><br><span class="line">                .object(null)</span><br><span class="line">                .build();</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Action</code>创建好后，可以直接在<code>Provider中进行注册</code>  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registerAction(&quot;md5&quot;,new MD5EncryptAction());</span><br></pre></td></tr></table></figure>
<p>第一个参数”md5”是action key，可以自定义，以后在调用的时候需要用到。</p>
<h3 id="2-6-调用"><a href="#2-6-调用" class="headerlink" title="2.6 调用"></a>2.6 调用</h3><p>前面几节，我们已经把和定义好了，这节我们就来调用。  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">RouterResponse response = LocalRouter.getInstance(MaApplication.getMaApplication())</span><br><span class="line">                            .route(context, RouterRequest.obtain(context)</span><br><span class="line">                            .provider(&quot;util&quot;)</span><br><span class="line">                            .action(&quot;md5&quot;)</span><br><span class="line">                            .data(&quot;params_1&quot;, &quot;Hello&quot;)</span><br><span class="line">                            .data(&quot;params_2&quot;, &quot;World&quot;));</span><br></pre></td></tr></table></figure>
<p>首先通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalRouter.getInstance(MaApplication.getMaApplication())</span><br></pre></td></tr></table></figure>
<p>拿到<code>LocalRouter</code>的实例，然后通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route(Context context,RouterRequest request)</span><br></pre></td></tr></table></figure>
<p>方法进行调用。</p>
<h3 id="2-6-1-创建RouterRequest"><a href="#2-6-1-创建RouterRequest" class="headerlink" title="2.6.1 创建RouterRequest"></a>2.6.1 创建RouterRequest</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">RouterRequest.obtain(context)</span><br><span class="line">                            .provider(&quot;util&quot;)</span><br><span class="line">                            .action(&quot;md5&quot;)</span><br><span class="line">                            .data(&quot;params_1&quot;, &quot;Hello&quot;)</span><br><span class="line">                            .data(&quot;params_2&quot;, &quot;World&quot;);</span><br></pre></td></tr></table></figure>
<p>这段代码的意思是，找到注册名为”util”的provider，然后再找到其注册名为”md5”的action。传入两个参数，key分别为”params_1”、”params_2”。</p>
<p>在2.6中的route方法中，将RouterRequest传入进去，即可完成调用。</p>
<p><strong>注意：RouterRequest使用了线程池技术，使用过后会被回收，所以请不要持有RouterRequest的引用，以免发生不必要的错误。</strong></p>
<h3 id="2-6-2-处理RouterResponse"><a href="#2-6-2-处理RouterResponse" class="headerlink" title="2.6.2 处理RouterResponse"></a>2.6.2 处理RouterResponse</h3><p>2.6中的<code>route</code>方法会返回<code>RouterResponse</code>实例，该方法是非阻塞线程，每次调用都会直接返回<code>RouterResponse</code>结果，通过<code>RouterResponse</code>的<code>isAsync()</code>方法可以得知该次调用是否是异步的，通过<code>RouterResponse</code>的<code>get()</code>方法可以返回该次调用的结果，<strong>请注意，<code>get()</code>方法有可能会造成阻塞，这取决于<code>isAsync()</code>，所以，请在调用<code>get()</code>方法前进行判断，不要在主线程调用阻塞的<code>get()</code>方法。</strong></p>
<h3 id="2-7-开启多进程模式"><a href="#2-7-开启多进程模式" class="headerlink" title="2.7 开启多进程模式"></a>2.7 开启多进程模式</h3><p>在2.2中，自定义的Application中，重写<code>needMultipleProcess()</code>方法，并将返回值设为true。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public boolean needMultipleProcess() &#123;</span><br><span class="line">    return true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-7-1-创建连接Service，注册本地路由"><a href="#2-7-1-创建连接Service，注册本地路由" class="headerlink" title="2.7.1 创建连接Service，注册本地路由"></a>2.7.1 创建连接Service，注册本地路由</h3><p>涉及到多进程，所以我们需要利用AIDL来进行进程间的通信。所以，应用内的每条进程，都需要创建一个连接Service，用来和广域路由进行通信。</p>
<p>创建自定义的Service继承自<code>LocalRouterConnectService</code>，不用做任何处理。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public class MainRouterConnectService extends LocalRouterConnectService &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>在AndroidManifest.xml中进行注册</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;service android:name=&quot;xxx.xxx.MainRouterConnectService&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>然后再在自定义的Application中的<code>initializeAllProcessRouter()</code>方法中，将该进程的连接Service注册给广域路由。  </p>
<p><code>WideRouter.registerLocalRouter</code>方法中第一个参数代表注册的进程名，第二个参数是对应连接Service的类名。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void initializeAllProcessRouter() &#123;</span><br><span class="line">    WideRouter.registerLocalRouter(&quot;com.spinytech.maindemo&quot;,MainRouterConnectService.class);</span><br><span class="line">    WideRouter.registerLocalRouter(&quot;com.spinytech.maindemo:music&quot;,MusicRouterConnectService.class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-7-2-多进程调用"><a href="#2-7-2-多进程调用" class="headerlink" title="2.7.2 多进程调用"></a>2.7.2 多进程调用</h3><p>多进程调用与2.6中本地调用基本一样，只是在生成<code>RouterRequest</code>的时候，需要多加一个Domain，Domain就是需要调用的进程名。(在obtain<code>RouterRequest</code>的时候，如果不加domain，则默认domain是当前进程名)  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">RouterRequest</span><br><span class="line">    .obtain(context)</span><br><span class="line">    .domain(&quot;com.spinytech.maindemo:music&quot;)</span><br><span class="line">    .provider(&quot;music&quot;)</span><br><span class="line">    .action(&quot;play&quot;);</span><br></pre></td></tr></table></figure>
<h2 id="3-原理"><a href="#3-原理" class="headerlink" title="3. 原理"></a>3. 原理</h2><p>整个架构都是基于路由的原理来实现的，具体的实现原理，可以参考之前的一篇关于架构思考的文章，<br><a href="http://blog.spinytech.com/2016/12/28/android_modularization/">《Android架构思考》</a>，本项目基本的设计思路都在这篇文章中有所体现。</p>
<h2 id="4-存在缺陷"><a href="#4-存在缺陷" class="headerlink" title="4. 存在缺陷"></a>4. 存在缺陷</h2><ul>
<li>暂不支持多个相同ShareUid的Apk之间的调用。</li>
<li>需要继承自<code>MaApplication</code>，对原有<code>Application</code>代码有改动。</li>
</ul>
<h2 id="5-未来版本计划"><a href="#5-未来版本计划" class="headerlink" title="5. 未来版本计划"></a>5. 未来版本计划</h2><ul>
<li>加入<code>Action</code>失效开关，使其可以由服务端动态控制</li>
<li>加入<code>Action</code>热替换功能</li>
<li>优化消息传递过程中的打包拆包过程</li>
</ul>
<hr>
<p>原创文章，转载请先联系作者：<a href="&#109;&#97;&#x69;&#108;&#116;&#x6f;&#x3a;&#115;&#112;&#x69;&#x6e;&#121;&#x2e;&#x74;&#x65;&#x63;&#x68;&#64;&#x67;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#111;&#109;">&#115;&#112;&#x69;&#x6e;&#121;&#x2e;&#x74;&#x65;&#x63;&#x68;&#64;&#x67;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#111;&#109;</a></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://blog.spinytech.com/2017/02/03/ma_get_start_en/" data-id="ciyssq6cd001msc01vrxacf5b" class="article-share-link">分享到</a><div class="tags"><a href="/tags/架构/">架构</a><a href="/tags/ModularizationArchitecture/">ModularizationArchitecture</a></div><div class="post-nav"><a href="/2017/02/01/ma_get_start_cn/" class="next">ModularizationArchitecture 使用教程</a></div><div data-thread-key="2017/02/03/ma_get_start_en/" data-title="The guide of the ModularizationArchitecture" data-url="http://blog.spinytech.com/2017/02/03/ma_get_start_en/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/02/03/ma_get_start_en/" data-title="The guide of the ModularizationArchitecture" data-url="http://blog.spinytech.com/2017/02/03/ma_get_start_en/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.spinytech.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/翻译/">翻译</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/翻译/" style="font-size: 15px;">翻译</a> <a href="/tags/架构/" style="font-size: 15px;">架构</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/Dagger2/" style="font-size: 15px;">Dagger2</a> <a href="/tags/架构思考/" style="font-size: 15px;">架构思考</a> <a href="/tags/模块化/" style="font-size: 15px;">模块化</a> <a href="/tags/多进程/" style="font-size: 15px;">多进程</a> <a href="/tags/View绘制/" style="font-size: 15px;">View绘制</a> <a href="/tags/Android视图/" style="font-size: 15px;">Android视图</a> <a href="/tags/高并发/" style="font-size: 15px;">高并发</a> <a href="/tags/对象池/" style="font-size: 15px;">对象池</a> <a href="/tags/ModularizationArchitecture/" style="font-size: 15px;">ModularizationArchitecture</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/03/ma_get_start_en/">The guide of the ModularizationArchitecture</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/01/ma_get_start_cn/">ModularizationArchitecture 使用教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/10/concurrent_object_pool/">高并发对象池思考</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/28/android_modularization/">Android架构思考(模块化、多进程)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/19/android_view_on_draw/">View绘制分析笔记之onDraw</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/15/android_view_on_layout/">View绘制分析笔记之onLayout</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/12/android_view_on_measure/">View绘制分析笔记之onMeasure</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/02/android_view_draw_setcontentview/">Android 视图及View绘制分析笔记之setContentView</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/20/android_multiple_process_notice/">Android多进程注意事项</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/android_multiple_process_usage_scenario/">Android多进程使用场景</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Spiny.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'SpinyTech'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>